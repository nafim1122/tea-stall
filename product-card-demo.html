<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Card Demo - Tea Stall</title>
    <style>
        /* Reset and base styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: #f5f5f5;
            padding: 2rem;
            line-height: 1.6;
        }

        /* Container for demo */
        .demo-container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
        }

        .demo-title {
            grid-column: 1 / -1;
            text-align: center;
            color: #2d3748;
            margin-bottom: 1rem;
        }

        /* Product Card Component */
        .product-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            overflow: hidden;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            max-width: 400px;
            margin: 0 auto;
        }

        .product-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }

        /* Product image section */
        .product-image {
            position: relative;
            width: 100%;
            height: 240px;
            overflow: hidden;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .product-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image img {
            transform: scale(1.05);
        }

        /* Placeholder for missing images */
        .image-placeholder {
            color: white;
            font-size: 3rem;
            opacity: 0.8;
        }

        /* Product content section */
        .product-content {
            padding: 1.5rem;
        }

        .product-name {
            font-size: 1.25rem;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 1rem;
            line-height: 1.3;
        }

        /* Weight options section */
        .weight-options {
            margin-bottom: 1.5rem;
        }

        .weight-options-label {
            display: block;
            font-size: 0.9rem;
            font-weight: 500;
            color: #4a5568;
            margin-bottom: 0.75rem;
        }

        .weight-buttons {
            display: flex;
            gap: 0.5rem;
        }

        .weight-option {
            flex: 1;
            padding: 0.75rem 1rem;
            border: 2px solid #e2e8f0;
            background: white;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            color: #4a5568;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }

        .weight-option:hover {
            border-color: #16a34a;
            color: #16a34a;
        }

        .weight-option.selected {
            background: #16a34a;
            border-color: #16a34a;
            color: white;
        }

        .weight-option:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(22, 163, 74, 0.1);
        }

        /* Quantity section */
        .quantity-section {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .quantity-label {
            font-size: 0.9rem;
            font-weight: 500;
            color: #4a5568;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            overflow: hidden;
        }

        .quantity-btn {
            background: white;
            border: none;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            color: #4a5568;
            transition: background-color 0.2s ease;
        }

        .quantity-btn:hover {
            background: #f7fafc;
        }

        .quantity-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .quantity-input {
            border: none;
            width: 50px;
            height: 32px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 500;
            outline: none;
        }

        /* Price display section */
        .price-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid #e2e8f0;
        }

        .price-display {
            font-size: 1.5rem;
            font-weight: 700;
            color: #16a34a;
        }

        .price-unit {
            font-size: 0.85rem;
            color: #6b7280;
            font-weight: 400;
        }

        /* Accessibility - Screen reader announcements */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Responsive design */
        @media (max-width: 640px) {
            body {
                padding: 1rem;
            }
            
            .product-card {
                max-width: none;
            }
            
            .weight-buttons {
                flex-direction: column;
            }
            
            .weight-option {
                flex: none;
            }
            
            .quantity-section {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
        }

        /* Loading state */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }

        /* Error state */
        .error {
            border: 2px solid #ef4444;
        }

        .error-message {
            color: #ef4444;
            font-size: 0.8rem;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1 class="demo-title">Product Card Component Demo</h1>
        
        <!-- Example 1: Tea Product -->
        <div class="product-card" id="tea-card">
            <div class="product-image">
                <div class="image-placeholder">üçÉ</div>
            </div>
            <div class="product-content">
                <h2 class="product-name">Premium Green Tea</h2>
                
                <!-- Weight Selection -->
                <div class="weight-options">
                    <span class="weight-options-label">Select Weight:</span>
                    <div class="weight-buttons" role="radiogroup" aria-labelledby="weight-label-tea">
                        <button class="weight-option selected" 
                                type="button" 
                                role="radio" 
                                aria-checked="true"
                                data-weight="1kg" 
                                data-card="tea-card">
                            1 kg
                        </button>
                        <button class="weight-option" 
                                type="button" 
                                role="radio" 
                                aria-checked="false"
                                data-weight="0.5kg" 
                                data-card="tea-card">
                            ¬Ω kg
                        </button>
                    </div>
                </div>
                
                <!-- Quantity Selection -->
                <div class="quantity-section">
                    <label class="quantity-label" for="quantity-tea">Quantity:</label>
                    <div class="quantity-controls">
                        <button class="quantity-btn" type="button" data-action="decrease" data-card="tea-card" aria-label="Decrease quantity">-</button>
                        <input class="quantity-input" 
                               type="number" 
                               id="quantity-tea" 
                               min="1" 
                               max="99" 
                               value="1" 
                               data-card="tea-card"
                               aria-label="Quantity">
                        <button class="quantity-btn" type="button" data-action="increase" data-card="tea-card" aria-label="Increase quantity">+</button>
                    </div>
                </div>
                
                <!-- Price Display -->
                <div class="price-section">
                    <div class="price-display" id="price-tea">
                        $<span class="price-amount">25.00</span>
                        <span class="price-unit">total</span>
                    </div>
                </div>
                
                <!-- Screen reader announcements -->
                <div id="price-announcement-tea" class="sr-only" aria-live="polite" aria-atomic="true"></div>
            </div>
        </div>

        <!-- Example 2: Coffee Product -->
        <div class="product-card" id="coffee-card">
            <div class="product-image">
                <div class="image-placeholder">‚òï</div>
            </div>
            <div class="product-content">
                <h2 class="product-name">Arabica Coffee Beans</h2>
                
                <!-- Weight Selection -->
                <div class="weight-options">
                    <span class="weight-options-label">Select Weight:</span>
                    <div class="weight-buttons" role="radiogroup" aria-labelledby="weight-label-coffee">
                        <button class="weight-option selected" 
                                type="button" 
                                role="radio" 
                                aria-checked="true"
                                data-weight="1kg" 
                                data-card="coffee-card">
                            1 kg
                        </button>
                        <button class="weight-option" 
                                type="button" 
                                role="radio" 
                                aria-checked="false"
                                data-weight="0.5kg" 
                                data-card="coffee-card">
                            ¬Ω kg
                        </button>
                    </div>
                </div>
                
                <!-- Quantity Selection -->
                <div class="quantity-section">
                    <label class="quantity-label" for="quantity-coffee">Quantity:</label>
                    <div class="quantity-controls">
                        <button class="quantity-btn" type="button" data-action="decrease" data-card="coffee-card" aria-label="Decrease quantity">-</button>
                        <input class="quantity-input" 
                               type="number" 
                               id="quantity-coffee" 
                               min="1" 
                               max="99" 
                               value="1" 
                               data-card="coffee-card"
                               aria-label="Quantity">
                        <button class="quantity-btn" type="button" data-action="increase" data-card="coffee-card" aria-label="Increase quantity">+</button>
                    </div>
                </div>
                
                <!-- Price Display -->
                <div class="price-section">
                    <div class="price-display" id="price-coffee">
                        $<span class="price-amount">42.00</span>
                        <span class="price-unit">total</span>
                    </div>
                </div>
                
                <!-- Screen reader announcements -->
                <div id="price-announcement-coffee" class="sr-only" aria-live="polite" aria-atomic="true"></div>
            </div>
        </div>
    </div>

    <script>
        /**
         * ProductCard - A modular component for displaying product information
         * with weight options, quantity selection, and dynamic pricing
         */
        class ProductCard {
            constructor(cardId, config) {
                this.cardId = cardId;
                this.config = {
                    pricePerKg: config.pricePerKg || 0,
                    pricePerHalfKg: config.pricePerHalfKg || 0,
                    productName: config.productName || 'Product',
                    defaultWeight: config.defaultWeight || '1kg',
                    defaultQuantity: config.defaultQuantity || 1
                };
                
                // Current state
                this.currentWeight = this.config.defaultWeight;
                this.currentQuantity = this.config.defaultQuantity;
                
                // DOM elements
                this.card = document.getElementById(cardId);
                this.weightButtons = this.card.querySelectorAll('.weight-option');
                this.quantityInput = this.card.querySelector('.quantity-input');
                this.quantityButtons = this.card.querySelectorAll('.quantity-btn');
                this.priceAmount = this.card.querySelector('.price-amount');
                this.priceAnnouncement = this.card.querySelector(`[id*="price-announcement"]`);
                
                this.init();
            }
            
            /**
             * Initialize the component - set up event listeners and initial state
             */
            init() {
                this.setupEventListeners();
                this.updatePrice();
                this.updateWeightSelection();
            }
            
            /**
             * Set up all event listeners for the component
             */
            setupEventListeners() {
                // Weight option buttons
                this.weightButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        this.handleWeightChange(e.target.dataset.weight);
                    });
                    
                    // Keyboard navigation for radio group
                    button.addEventListener('keydown', (e) => {
                        this.handleWeightKeyboard(e);
                    });
                });
                
                // Quantity input
                this.quantityInput.addEventListener('input', (e) => {
                    this.handleQuantityChange(parseInt(e.target.value) || 1);
                });
                
                // Quantity buttons
                this.quantityButtons.forEach(button => {
                    button.addEventListener('click', (e) => {
                        const action = e.target.dataset.action;
                        if (action === 'increase') {
                            this.increaseQuantity();
                        } else if (action === 'decrease') {
                            this.decreaseQuantity();
                        }
                    });
                });
            }
            
            /**
             * Handle weight option change
             * @param {string} weight - The selected weight ('1kg' or '0.5kg')
             */
            handleWeightChange(weight) {
                if (this.currentWeight === weight) return;
                
                this.currentWeight = weight;
                this.updateWeightSelection();
                this.updatePrice();
                this.announcePrice();
            }
            
            /**
             * Handle keyboard navigation for weight options (accessibility)
             * @param {KeyboardEvent} e - The keyboard event
             */
            handleWeightKeyboard(e) {
                const currentIndex = Array.from(this.weightButtons).indexOf(e.target);
                let nextIndex;
                
                switch (e.key) {
                    case 'ArrowRight':
                    case 'ArrowDown':
                        e.preventDefault();
                        nextIndex = (currentIndex + 1) % this.weightButtons.length;
                        this.weightButtons[nextIndex].focus();
                        this.handleWeightChange(this.weightButtons[nextIndex].dataset.weight);
                        break;
                    case 'ArrowLeft':
                    case 'ArrowUp':
                        e.preventDefault();
                        nextIndex = currentIndex === 0 ? this.weightButtons.length - 1 : currentIndex - 1;
                        this.weightButtons[nextIndex].focus();
                        this.handleWeightChange(this.weightButtons[nextIndex].dataset.weight);
                        break;
                }
            }
            
            /**
             * Handle quantity change
             * @param {number} quantity - The new quantity value
             */
            handleQuantityChange(quantity) {
                // Validate quantity
                if (quantity < 1) quantity = 1;
                if (quantity > 99) quantity = 99;
                
                this.currentQuantity = quantity;
                this.quantityInput.value = quantity;
                this.updateQuantityButtons();
                this.updatePrice();
                this.announcePrice();
            }
            
            /**
             * Increase quantity by 1
             */
            increaseQuantity() {
                this.handleQuantityChange(this.currentQuantity + 1);
            }
            
            /**
             * Decrease quantity by 1
             */
            decreaseQuantity() {
                this.handleQuantityChange(this.currentQuantity - 1);
            }
            
            /**
             * Update the visual state of weight selection buttons
             */
            updateWeightSelection() {
                this.weightButtons.forEach(button => {
                    const isSelected = button.dataset.weight === this.currentWeight;
                    button.classList.toggle('selected', isSelected);
                    button.setAttribute('aria-checked', isSelected);
                });
            }
            
            /**
             * Update the state of quantity control buttons
             */
            updateQuantityButtons() {
                const decreaseBtn = this.card.querySelector('[data-action="decrease"]');
                const increaseBtn = this.card.querySelector('[data-action="increase"]');
                
                decreaseBtn.disabled = this.currentQuantity <= 1;
                increaseBtn.disabled = this.currentQuantity >= 99;
            }
            
            /**
             * Calculate and display the current price based on weight and quantity
             */
            updatePrice() {
                const basePrice = this.getBasePrice();
                const totalPrice = basePrice * this.currentQuantity;
                
                this.priceAmount.textContent = totalPrice.toFixed(2);
            }
            
            /**
             * Get the base price for the currently selected weight
             * @returns {number} The base price for the selected weight
             */
            getBasePrice() {
                switch (this.currentWeight) {
                    case '1kg':
                        return this.config.pricePerKg;
                    case '0.5kg':
                        return this.config.pricePerHalfKg;
                    default:
                        return 0;
                }
            }
            
            /**
             * Announce price changes to screen readers
             */
            announcePrice() {
                if (!this.priceAnnouncement) return;
                
                const basePrice = this.getBasePrice();
                const totalPrice = basePrice * this.currentQuantity;
                const weightLabel = this.currentWeight === '1kg' ? '1 kilogram' : 'half kilogram';
                
                const announcement = `Price updated: $${totalPrice.toFixed(2)} for ${this.currentQuantity} ${weightLabel} of ${this.config.productName}`;
                
                this.priceAnnouncement.textContent = announcement;
            }
            
            /**
             * Update configuration (useful for dynamic price changes)
             * @param {Object} newConfig - New configuration object
             */
            updateConfig(newConfig) {
                this.config = { ...this.config, ...newConfig };
                this.updatePrice();
                this.announcePrice();
            }
            
            /**
             * Get current selection state
             * @returns {Object} Current state object
             */
            getCurrentState() {
                return {
                    weight: this.currentWeight,
                    quantity: this.currentQuantity,
                    basePrice: this.getBasePrice(),
                    totalPrice: this.getBasePrice() * this.currentQuantity
                };
            }
        }

        /**
         * Initialize product cards when DOM is loaded
         */
        document.addEventListener('DOMContentLoaded', function() {
            // Example 1: Tea Product
            const teaCard = new ProductCard('tea-card', {
                pricePerKg: 25.00,          // $25 per kg
                pricePerHalfKg: 15.00,      // $15 per half kg (not just half of kg price)
                productName: 'Premium Green Tea',
                defaultWeight: '1kg',
                defaultQuantity: 1
            });

            // Example 2: Coffee Product  
            const coffeeCard = new ProductCard('coffee-card', {
                pricePerKg: 42.00,          // $42 per kg
                pricePerHalfKg: 25.00,      // $25 per half kg (different pricing strategy)
                productName: 'Arabica Coffee Beans',
                defaultWeight: '1kg',
                defaultQuantity: 1
            });

            // Example: How to update prices dynamically (e.g., for promotions)
            // setTimeout(() => {
            //     teaCard.updateConfig({
            //         pricePerKg: 22.00,      // Updated price
            //         pricePerHalfKg: 13.00   // Updated price
            //     });
            // }, 5000);

            // Example: How to get current state
            // console.log('Tea card state:', teaCard.getCurrentState());
            // console.log('Coffee card state:', coffeeCard.getCurrentState());
        });

        /**
         * USAGE EXAMPLE:
         * 
         * To create a new product card:
         * 
         * 1. Add HTML structure:
         *    <div class="product-card" id="my-product">
         *        <!-- Copy the HTML structure from examples above -->
         *    </div>
         * 
         * 2. Initialize with JavaScript:
         *    const myCard = new ProductCard('my-product', {
         *        pricePerKg: 30.00,
         *        pricePerHalfKg: 18.00,     // Can be different from pricePerKg/2
         *        productName: 'My Product',
         *        defaultWeight: '1kg',      // '1kg' or '0.5kg'
         *        defaultQuantity: 1
         *    });
         * 
         * 3. Optional - Update prices dynamically:
         *    myCard.updateConfig({
         *        pricePerKg: 35.00,
         *        pricePerHalfKg: 20.00
         *    });
         * 
         * 4. Optional - Get current state:
         *    const state = myCard.getCurrentState();
         *    console.log(state.totalPrice);
         */
    </script>
</body>
</html>